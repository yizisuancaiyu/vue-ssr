(this.webpackJsonp=this.webpackJsonp||[]).push([[60],{1321:function(e,t,n){var a=n(1996);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(15).default)("ea3d75ee",a,!1,{})},1995:function(e,t,n){"use strict";var a=n(1321);n.n(a).a},1996:function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".helper[data-v-78864f40] {\n  width: 295px;\n  background: #252525;\n}\n.helper-header[data-v-78864f40] {\n    height: 40px;\n    border-bottom: 1px solid #121212;\n}\n.helper-header .tab[data-v-78864f40] {\n      font-family: PingFangSC-Regular;\n      font-size: 12px;\n      height: 39px;\n      padding-top: 10px;\n      color: #999;\n      display: inline-block;\n      text-align: center;\n      cursor: pointer;\n}\n.helper-header .tab[data-v-78864f40]:hover {\n        color: #3683FF;\n}\n.helper-header .first-tab[data-v-78864f40] {\n      margin: 0 95px 0 49px;\n}\n.helper-header .is-active[data-v-78864f40] {\n      color: #3683FF;\n      border-bottom: 2px solid #3683FF;\n}\n.helper-content[data-v-78864f40] {\n    background: #20242f;\n}\n.helper-content .desc[data-v-78864f40] {\n      width: 100%;\n      height: 43px;\n      border-bottom: 1px solid #121212;\n}\n.helper-content p[data-v-78864f40] {\n      font-family: PingFangSC-Regular;\n      font-size: 12px;\n      color: #999;\n      padding: 10px;\n      width: 290px;\n}\n.helper-content .selector[data-v-78864f40] {\n      border-bottom: 1px solid #323232;\n      border-left: 1px solid #323232;\n      border-right: 1px solid #323232;\n      width: 290px;\n      height: 38px;\n}\n.helper-content .selector[data-v-78864f40] .ivu-select-dropdown {\n        top: 116px !important;\n}\n.helper-content .selector[data-v-78864f40] .ivu-select-selection {\n        background: #20242f;\n        border: none;\n}\n.helper-content .selector[data-v-78864f40] .ivu-select-input {\n        text-align: center;\n}\n.helper-content .selector-option[data-v-78864f40] {\n        width: 85px;\n        text-align: center;\n        display: inline-block;\n        font-size: 12px;\n        color: #FFFFFF;\n        padding-top: 2px;\n}\n.helper-content .selector .option-label[data-v-78864f40] {\n        font-family: PingFangSC-Regular;\n        font-size: 12px;\n        letter-spacing: 0;\n}\n.helper .competition[data-v-78864f40] {\n    font-size: 12px;\n    color: #FFFFFF;\n    margin-top: 16px;\n}\n.helper .competition-desc[data-v-78864f40] {\n      display: inline-block;\n      cursor: pointer;\n      color: #fff;\n      height: 17px;\n      line-height: 15px;\n      margin-bottom: 10px;\n}\n.helper .competition-desc[data-v-78864f40]:hover {\n        color: #3683FF;\n        border: 1px solid #3683FF;\n        border-radius: 5px;\n}\n.helper .competition .active[data-v-78864f40] {\n      border: 1px solid #3683FF;\n      border-radius: 5px;\n}\n.helper .competition .time[data-v-78864f40] {\n      width: 75px;\n      padding-left: 5px;\n      display: inline-block;\n      text-align: left;\n}\n.helper .competition .host-team[data-v-78864f40] {\n      width: 98px;\n      padding-right: 5px;\n      display: inline-block;\n      text-align: right;\n}\n.helper .competition .vs[data-v-78864f40] {\n      width: 15px;\n      font-size: 12px;\n      display: inline-block;\n      text-align: center;\n}\n.helper .competition .guest-team[data-v-78864f40] {\n      width: 98px;\n      padding-left: 5px;\n      display: inline-block;\n      text-align: left;\n}\n.helper .order .competition-desc[data-v-78864f40] {\n    height: 28px;\n    line-height: 15px;\n}\n.helper .order .competition-desc[data-v-78864f40]:hover {\n      color: #fff;\n      border: none;\n}\n.helper .order .live[data-v-78864f40] {\n    padding-top: 8px;\n    color: #3683FF;\n}\n.helper .order .time[data-v-78864f40] {\n    width: 45px;\n}\n.helper .order .vs[data-v-78864f40] {\n    padding-top: 8px;\n}\n.helper .order .league-name[data-v-78864f40] {\n    width: 45px;\n    padding-top: 8px;\n    text-align: left;\n}\n.helper .order .host-team[data-v-78864f40] {\n    width: 75px;\n    padding-right: 5px;\n    padding-top: 8px;\n    display: inline-block;\n    text-align: right;\n}\n.helper .order .guest-team[data-v-78864f40] {\n    width: 75px;\n    padding-left: 5px;\n    padding-top: 8px;\n    display: inline-block;\n    text-align: left;\n}\n.competition[data-v-78864f40] {\n  overflow-y: auto;\n  height: 600px;\n}\n[data-v-78864f40]::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n  border-radius: 6px;\n  background-color: #eee;\n}\n[data-v-78864f40]::-webkit-scrollbar-track {\n  border-radius: 6px;\n  background-color: #eee;\n}\n[data-v-78864f40]::-webkit-scrollbar-thumb {\n  border-radius: 6px;\n  background: #20242f;\n}\n.green[data-v-78864f40] {\n  color: #17f9a4 !important;\n}\n.yellow[data-v-78864f40] {\n  color: #E4742F !important;\n}\n",""])},2106:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"helper"},[n("div",{staticClass:"helper-header"},[n("span",{staticClass:"tab first-tab",class:0===e.activeIndex?"is-active":"",on:{click:function(t){return e.handleTab(0)}}},[e._v("直播设置")]),e._v(" "),n("span",{staticClass:"tab",class:1===e.activeIndex?"is-active":"",on:{click:function(t){return e.handleTab(1)}}},[e._v("我的预约")])]),e._v(" "),n("div",{staticClass:"helper-content"},[n("div",{staticClass:"desc"},[n("Tooltip",{attrs:{content:e.currentRoom,placement:"top"}},[n("p",{staticClass:"ellipsis"},[e._v("\n          当前房间： "+e._s(e.currentRoom)+"\n        ")])])],1),e._v(" "),0===e.activeIndex?n("div",{staticClass:"selector"},[n("Select",{staticClass:"selector-option first-select",attrs:{placeholder:"分类"},on:{"on-change":e.resetCompetitionList},model:{value:e.selector.sportId,callback:function(t){e.$set(e.selector,"sportId",t)},expression:"selector.sportId"}},e._l(e.liveType,function(t,a){return n("Option",{key:a,attrs:{value:t.value}},[e._v("\n          "+e._s(t.name)+"\n        ")])}),1),e._v(" "),n("span",[e._v("|")]),e._v(" "),n("Select",{staticClass:"selector-option",attrs:{placeholder:"联赛"},on:{"on-change":e.getCompetitionList},model:{value:e.selector.leagueId,callback:function(t){e.$set(e.selector,"leagueId",t)},expression:"selector.leagueId"}},e._l(e.renderData.optionsCompetition,function(e){return n("Option",{key:e.leagueId,attrs:{label:e.leagueName,value:e.leagueId}})}),1),e._v(" "),n("span",[e._v("|")]),e._v(" "),n("Select",{staticClass:"selector-option second-select",attrs:{placeholder:"解说方言"},model:{value:e.selector.dialectId,callback:function(t){e.$set(e.selector,"dialectId",t)},expression:"selector.dialectId"}},e._l(e.renderData.dialectData,function(e){return n("Option",{key:e.type_id,attrs:{label:e.name,value:e.type_id}})}),1)],1):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.activeIndex,expression:"activeIndex===0"}],staticClass:"competition"},e._l(e.renderData.competitionList,function(t,a){return n("div",{key:a,staticClass:"competition-desc clearfix",class:{active:t.isSelect},on:{click:function(n){return e.selectCompetition(t,a)}}},[n("span",{staticClass:"time fl"},[e._v(e._s(e.dayjs(t.matchTime).format("MM-DD HH:mm")))]),e._v(" "),n("span",{staticClass:"host-team ellipsis fl"},[e._v(e._s(t.hostTeamName))]),e._v(" "),n("span",{staticClass:"vs fl"},[e._v("VS")]),e._v(" "),n("span",{staticClass:"guest-team ellipsis fl"},[e._v(e._s(t.guestTeamName))])])}),0),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===e.activeIndex,expression:"activeIndex===1"}],staticClass:"competition order"},e._l(e.renderData.orderData,function(t,a){return n("div",{key:a,staticClass:"competition-desc clearfix",class:t.liveM3u8Url?"green":""},[n("span",{staticClass:"time fl"},[e._v(e._s(e.dayjs(t.matchTime).format("MM-DD HH:mm")))]),e._v(" "),n("span",{staticClass:"league-name fl ellipsis"},[e._v(e._s(t.leagueName))]),e._v(" "),n("span",{staticClass:"host-team fl ellipsis"},[e._v(e._s(t.homeTeamName))]),e._v(" "),n("span",{staticClass:"vs fl"},[e._v("VS")]),e._v(" "),n("span",{staticClass:"guest-team fl ellipsis"},[e._v(e._s(t.awayTeamName))]),e._v(" "),n("span",{staticClass:"live fl",on:{click:function(n){return e.live(t)}}},[e._v("开播")])])}),0)])])};a._withStripped=!0;n(263),n(267),n(207);var i=n(29),o=n.n(i),s=(n(117),n(48)),r=n.n(s),l=n(4),c=n.n(l),d=n(38),p=n(18),h=n(268),m=n(82),u={components:{Select:d.Select,Option:d.Option,Tooltip:d.Tooltip},data:function(){return{activeIndex:0,currentRoom:"",uid:"",token:"",name:"",title:"",selector:{sportId:"",leagueId:"",dialectId:-1,dialectName:""},renderData:{dialectData:[],optionsCompetition:[],competitionList:[],orderData:[]},liveType:[]}},mounted:function(){this.uid=Object(m.a)("uid",location.href),this.token=Object(m.a)("token",location.href),this.dialects(),this.getLiveType(),this.init(),document.getElementsByTagName("body")[0].style.cssText="overflow-x: hidden;overflow-y: hidden;",this.displayWindowSize(),window.addEventListener("resize",this.displayWindowSize)},methods:c()({},Object(p.mapActions)(["GetCompetitionClassify","GetCompetitionList","GetAnchorSetInfo"]),{getLiveType:function(){var e=r()(o.a.mark(function e(){var t,n,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$get("v0.2/livetypes",{apiType:"anchor"});case 3:if(t=e.sent,!(n=t.data)||!n.length){e.next=8;break}return n.forEach(function(e){1===e.display&&(e.value=e.type_id,a.liveType.push(e))}),e.abrupt("return",!1);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:this.liveType.length||(this.liveType=[{name:"足球",value:1},{name:"篮球球",value:2},{name:"其他",value:-1}]);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),init:function(){this.getAnchorInfo(),new QWebChannel(qt.webChannelTransport,function(e){window.bridge=e.objects.bridge})},getAnchorInfo:function(){var e=this;this.GetAnchorSetInfo({uids:this.uid,vm:this}).then(function(t){if(e.roomId=t.room_id,e.title=t.title,t.title){var n=t.match_name?t.match_name:"-",a=t.match_type_name?t.match_type_name:"-";e.currentRoom=e.getSelectType(t.live_type_id)+"-"+n+"-"+a}else e.name=t.anchor.nickname+"的直播间",e.currentRoom=t.anchor.nickname+"的直播间"})},handleTab:function(e){this.activeIndex=e,1===this.activeIndex?this.getOrderCompetitionList():this.init()},dialects:function(){var e=this;this.renderData.dialectData=[],this.$get("v0.1/dialects",{apiType:"anchor"}).then(function(t){var n=t.code,a=t.data;if(e.$judgeCode(n)){a&&a.length&&a.forEach(function(t){1===t.display&&e.renderData.dialectData.push(t)});var i=a.filter(function(e){return"普通话"===e.name});e.selector.dialectId=i.length?i[0].type_id:0}})},getCompetitionClassify:function(){var e=this;this.GetCompetitionClassify({sportId:this.selector.sportId,vm:this}).then(function(t){e.renderData.optionsCompetition=t}).catch(function(){e.renderData.optionsCompetition=[]})},getCompetitionList:function(e){var t=this;e&&(this.selector.leagueId=e,this.GetCompetitionList({leagueId:e,sportId:this.selector.sportId,vm:this}).then(function(e){e.map(function(e){e.isSelect=!1}),t.renderData.competitionList=e}).catch(function(){t.renderData.competitionList=[]}))},resetCompetitionList:function(){this.renderData.competitionList=[],this.selector.leagueId="",this.getCompetitionClassify(),-1===Number(this.selector.sportId)&&this.saveRoom({},0)},selectCompetition:Object(h.a)(function(e,t){this.renderData.competitionList.forEach(function(e){e.isSelect=!1}),this.renderData.competitionList[t].isSelect=!0;var n=e.leagueName?e.leagueName:"",a=e.hostTeamName?e.hostTeamName:"",i=e.guestTeamName?e.guestTeamName:"";this.currentRoom=this.getSelectType(this.selector.sportId)+n+"-"+a+"vs"+i,this.saveRoom(e,0)},1e3),live:function(e){e.hostTeamName=e.homeTeamName,e.guestTeamName=e.awayTeamName,this.selector.leagueId=e.leagueId,this.saveRoom(e,1)},saveRoom:function(e,t){var n=this;if(window.bridge){var a=JSON.stringify({url:e.liveM3u8Url||"",matchId:e.matchId||""});window.bridge.onStreamStart(a)}var i={},o={};if(0===t&&(o.live_type_id=this.selector.sportId,o.tag_id=this.selector.dialectId),-1===Number(this.selector.sportId))i={uid:this.uid,match_id:0,match_type_id:-1,room_id:0,match_type_name:"",match_name:"",title:this.title||this.name};else{var s="";e.hostTeamName&&e.guestTeamName&&(s=e.hostTeamName+"vs"+e.guestTeamName),i=c()({uid:this.uid,match_id:e.matchId,match_type_id:this.selector.leagueId,room_id:this.roomId,match_type_name:e.leagueName,match_name:s,title:this.title||this.name},o)}this.$put("v0.1/rooms",{apiType:"anchor",body:c()({},i)}).then(function(e){var t=e.code,a=e.msg;n.$judgeCode(t)?n.getAnchorInfo():n.$error(a)})},getOrderCompetitionList:function(){var e=this;this.$get("v0.1/reservas",{body:{roomId:this.roomId},apiType:"anchor"}).then(function(t){var n=t.code,a=t.data;if(e.$judgeCode(n)&&a.length){var i=[];a.forEach(function(e){i.push(e.match_id)}),e.getMatchName(a,i)}else e.renderData.orderData=[]})},getMatchName:function(e,t){var n=this;this.renderData.orderData=[],this.$get("v9/queryMatchByIds",{apiType:"oldApi",body:{matchIds:encodeURI("[".concat(String(t),"]"))}}).then(function(t){var a=t.code,i=t.data;n.$judgeCode(a)&&i.length?e.forEach(function(e){i.forEach(function(t){t.matchId===e.match_id&&(t.reserva_id=e.reserva_id,n.renderData.orderData.push(t))})}):n.renderData.orderData=[]})},displayWindowSize:function(){var e=document.documentElement.clientHeight,t=document.getElementsByClassName("competition")[0],n=document.getElementsByClassName("competition")[1],a="height: "+e+"px !important;";t.style.cssText=a,n.style.cssText=a},getSelectType:function(e){return this.liveType.filter(function(t){return Number(t.value)===Number(e)})[0].name||"-"}})},v=(n(1995),n(6)),f=Object(v.a)(u,a,[],!1,null,"78864f40",null);f.options.__file="src/project/pc/www/pages/obs/competition.vue";t.default=f.exports}}]);