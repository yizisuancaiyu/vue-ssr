(this.webpackJsonp=this.webpackJsonp||[]).push([[65],{2104:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"warn"},[this._v("\n   \n")])};o._withStripped=!0;var i,s=e(264),a=e(82),c={data:function(){return{uid:"",token:"",topic:["100405","100408","100409"],mqtt:null}},mounted:function(){i=this,window.obsLogin=function(t,n){n&&localStorage.setItem("token",n)},window.obsSendMsg=function(){return 1},window.onRecvNoticeMsg=function(t){return t||2},this.uid=Object(a.a)("uid",location.href),this.token=Object(a.a)("token",location.href),this.init()},destroyed:function(){this.mqtt&&this.mqtt.unsubscribe(this.topic)},methods:{init:function(){var t=this;localStorage.getItem("token")&&localStorage.getItem("userInfo")?new QWebChannel(qt.webChannelTransport,function(t){window.channelObs=t.objects.obs,i.setMqtt()}):this.$get("jmfen-sport-usercenter/v1/user/info/"+this.uid,{apiType:"gw",headers:{Authorization:"Bearer "+this.token},body:{token:this.token}}).then(function(n){var e=n.code,o=n.data;100200===e&&(localStorage.setItem("uid",t.uid),localStorage.setItem("token",t.token),localStorage.setItem("userInfo",JSON.stringify(o)),window.location.reload())}),window.channelObs.onObsWebInitFinish()},setMqtt:function(){this.mqtt=null,this.mqtt=new s.a(this.getMessage),this.mqtt.subscribe(this.topic,null,"p2p")},getMessage:function(t,n){if("100405"===String(n.type)&&window.channelObs.onRecvWarningMsg("1"),"100408"===String(n.type)){var e=JSON.parse(n.msg);window.channelObs.onRecvViolateMsg(e.warning_content)}"100409"===String(n.type)&&window.channelObs.onRecvAnchorForbidMsg(n.msg)},obsSendMsg:function(){window.channelObs?window.channelObs.obsSendMsg("oooooooo"):window.channelObs.obsSendMsg("暂无数据")}}},r=e(6),l=Object(r.a)(c,o,[],!1,null,null,null);l.options.__file="src/project/pc/www/pages/obs/msg.vue";n.default=l.exports}}]);